<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV Mastery | Professional EV Technology Assessment</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš¡</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== CSS Variables ===== */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --accent: #8b5cf6;
            --dark: #1e293b;
            --darker: #0f172a;
            --light: #f8fafc;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --gray-dark: #475569;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --radius: 12px;
            --radius-sm: 8px;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        }
        
        /* ===== Reset & Base Styles ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--darker);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ===== Typography ===== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.1;
        }
        
        h2 {
            font-size: 2.25rem;
            color: var(--light);
        }
        
        h3 {
            font-size: 1.5rem;
            color: var(--light);
        }
        
        p {
            margin-bottom: 1rem;
            color: var(--gray-light);
        }
        
        .text-gradient {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }
        
        /* ===== Layout ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* ===== Header ===== */
        .main-header {
            padding: 2rem 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--primary);
        }
        
        .logo-text {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .tagline {
            font-size: 0.875rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }
        
        /* ===== Hero Section ===== */
        .hero-section {
            padding: 4rem 0;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 1) 100%);
        }
        
        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }
        
        .hero-content h1 {
            margin-bottom: 1.5rem;
        }
        
        .hero-stats {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .hero-visual {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            border-radius: var(--radius);
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-visual::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(37, 99, 235, 0.1) 0%, transparent 70%);
            animation: pulse 8s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1.2); opacity: 1; }
        }
        
        /* ===== Quiz Sections ===== */
        .quiz-section {
            padding: 4rem 0;
            flex: 1;
        }
        
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }
        
        .quiz-header {
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--darker) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .quiz-progress {
            margin-top: 1.5rem;
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--gradient);
            width: 0%;
            transition: var(--transition);
            border-radius: 4px;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--gray);
        }
        
        /* ===== Question Card ===== */
        .question-card {
            padding: 2rem;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }
        
        .question-number {
            background: var(--gradient);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            flex-shrink: 0;
            margin-right: 1rem;
        }
        
        .question-text {
            flex: 1;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--light);
            line-height: 1.4;
        }
        
        .options-grid {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            padding: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .option-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            background: rgba(37, 99, 235, 0.15);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.2);
        }
        
        .option-card.correct {
            background: rgba(16, 185, 129, 0.15);
            border-color: var(--success);
        }
        
        .option-card.incorrect {
            background: rgba(239, 68, 68, 0.15);
            border-color: var(--danger);
        }
        
        .option-letter {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--gray-light);
            flex-shrink: 0;
            transition: var(--transition);
        }
        
        .option-card.selected .option-letter {
            background: var(--gradient);
            color: white;
        }
        
        .option-card.correct .option-letter {
            background: var(--success);
            color: white;
        }
        
        .option-card.incorrect .option-letter {
            background: var(--danger);
            color: white;
        }
        
        .option-text {
            flex: 1;
            color: var(--gray-light);
            font-weight: 500;
        }
        
        .option-card.selected .option-text {
            color: var(--light);
        }
        
        /* ===== Navigation ===== */
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            padding: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(15, 23, 42, 0.5);
        }
        
        .nav-btn {
            padding: 0.875rem 2rem;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }
        
        .btn-prev {
            background: rgba(255, 255, 255, 0.1);
            color: var(--gray-light);
        }
        
        .btn-prev:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.2);
            color: var(--light);
        }
        
        .btn-next {
            background: var(--gradient);
            color: white;
        }
        
        .btn-next:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }
        
        .btn-submit {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: white;
        }
        
        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* ===== Results Section ===== */
        .results-section {
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .results-header {
            margin-bottom: 3rem;
        }
        
        .results-badge {
            background: var(--gradient);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            font-size: 3rem;
            color: white;
            animation: bounce 1s ease infinite alternate;
        }
        
        @keyframes bounce {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }
        
        .score-display {
            font-size: 4rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
            margin: 1rem 0;
        }
        
        .performance-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            text-align: left;
        }
        
        .performance-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .performance-metric:last-child {
            border-bottom: none;
        }
        
        .metric-value {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--light);
        }
        
        /* ===== Admin Panel ===== */
        .admin-panel {
            background: rgba(15, 23, 42, 0.95);
            border-radius: var(--radius);
            margin: 2rem 0;
            overflow: hidden;
            border: 1px solid rgba(139, 92, 246, 0.3);
            display: none;
        }
        
        .admin-header {
            background: linear-gradient(135deg, var(--accent) 0%, #6d28d9 100%);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-actions {
            display: flex;
            gap: 1rem;
        }
        
        .admin-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-sm);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }
        
        .admin-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .scores-table-container {
            overflow-x: auto;
        }
        
        .scores-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .scores-table th {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            text-align: left;
            color: var(--gray);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
        }
        
        .scores-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--gray-light);
        }
        
        .scores-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.875rem;
        }
        
        .rank-1 {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: var(--darker);
        }
        
        .rank-2 {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
            color: white;
        }
        
        .rank-3 {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
            color: white;
        }
        
        /* ===== Admin Access Button ===== */
        #direct-admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 9999;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.2);
            display: none; /* Hidden by default */
        }
        
        #direct-admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
        }
        
        #direct-admin-btn.visible {
            display: flex;
        }
        
        /* ===== Hidden/Visible Classes ===== */
        .hidden {
            display: none !important;
        }
        
        .visible {
            display: block !important;
        }
        
        /* ===== Footer ===== */
        .main-footer {
            background: rgba(15, 23, 42, 0.95);
            padding: 3rem 0;
            margin-top: auto;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
        }
        
        .footer-section h4 {
            color: var(--light);
            margin-bottom: 1.5rem;
            font-size: 1.125rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.75rem;
        }
        
        .footer-links a {
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
            font-size: 0.875rem;
        }
        
        /* ===== Responsive Design ===== */
        @media (max-width: 1024px) {
            .hero-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            
            .container {
                padding: 0 1.5rem;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .question-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .question-number {
                align-self: flex-start;
            }
            
            .quiz-navigation {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .admin-actions {
                flex-direction: column;
            }
            
            #direct-admin-btn {
                bottom: 10px;
                right: 10px;
                padding: 10px 16px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            
            .container {
                padding: 0 1rem;
            }
            
            .option-card {
                padding: 1rem;
            }
            
            .score-display {
                font-size: 3rem;
            }
            
            #direct-admin-btn {
                font-size: 0.75rem;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- Header -->
        <header class="main-header">
            <div class="container">
                <div class="header-content">
                    <a href="#" class="logo">
                        <span class="logo-icon">âš¡</span>
                        <div>
                            <div class="logo-text">EV Mastery</div>
                            <div class="tagline">Professional EV Technology Assessment</div>
                        </div>
                    </a>
                    <div class="header-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="total-attempts">0</span>
                            <span class="stat-label">Total Attempts</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="hero-grid">
                    <div class="hero-content">
                        <h1>Master Electric Vehicle Technology</h1>
                        <p>Test your knowledge with our comprehensive 60-question assessment covering all aspects of modern EV systems, from power electronics to charging infrastructure.</p>
                        
                        <div class="hero-stats">
                            <div class="stat-item">
                                <span class="stat-number">60</span>
                                <span class="stat-label">Questions</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">7</span>
                                <span class="stat-label">Topics</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">100%</span>
                                <span class="stat-label">Practical</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hero-visual">
                        <div style="text-align: center; position: relative; z-index: 1;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸš—âš¡</div>
                            <h3 style="color: white;">Industry-Standard Assessment</h3>
                            <p style="color: rgba(255,255,255,0.8);">Used by automotive professionals and educators worldwide</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Container -->
        <section class="quiz-section">
            <div class="container">
                <div class="quiz-container">
                    <!-- Name Entry Screen -->
                    <div id="name-entry">
                        <div class="quiz-header">
                            <h2>Begin Your Assessment</h2>
                            <p>Enter your name to start the comprehensive EV technology evaluation.</p>
                        </div>
                        
                        <div style="padding: 2rem;">
                            <div style="margin-bottom: 1.5rem;">
                                <input type="text" id="player-name" placeholder="Enter your full name" 
                                       style="width: 100%; padding: 1rem 1.5rem; border-radius: var(--radius-sm); 
                                              background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); 
                                              color: white; font-size: 1rem; transition: var(--transition);">
                            </div>
                            <button id="start-quiz-btn" class="nav-btn btn-next" style="width: 100%;">
                                <i class="fas fa-play-circle"></i> Start Assessment
                            </button>
                        </div>
                    </div>

                    <!-- Quiz Content -->
                    <div id="quiz-content" class="hidden">
                        <div class="quiz-header">
                            <h2 id="current-section">Power Electronics & Thermal Management</h2>
                            <p id="section-description">Section 1 of 7: Understanding EV power conversion and thermal systems</p>
                            
                            <div class="quiz-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                                <div class="progress-text">
                                    <span id="current-question">Question 1</span>
                                    <span id="progress-percent">0%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question-card">
                            <div class="question-header">
                                <div class="question-number" id="question-number">1</div>
                                <div class="question-text" id="question-text">Loading question...</div>
                            </div>
                            
                            <div class="options-grid" id="options-container">
                                <!-- Options will be inserted here -->
                            </div>
                        </div>
                        
                        <div class="quiz-navigation">
                            <button id="prev-btn" class="nav-btn btn-prev" disabled>
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <button id="next-btn" class="nav-btn btn-next">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="results-container" class="hidden">
                        <div class="results-section">
                            <div class="results-header">
                                <div class="results-badge">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <h2>Assessment Complete</h2>
                                <p>Your EV technology proficiency has been evaluated</p>
                            </div>
                            
                            <div class="score-display" id="score-display">0/60</div>
                            
                            <div class="performance-card">
                                <h3 style="margin-bottom: 1.5rem;">Performance Analysis</h3>
                                
                                <div class="performance-metric">
                                    <span>Overall Score</span>
                                    <span class="metric-value" id="overall-score">0%</span>
                                </div>
                                
                                <div class="performance-metric">
                                    <span>Correct Answers</span>
                                    <span class="metric-value" id="correct-answers">0</span>
                                </div>
                                
                                <div class="performance-metric">
                                    <span>Incorrect Answers</span>
                                    <span class="metric-value" id="incorrect-answers">0</span>
                                </div>
                                
                                <div class="performance-metric">
                                    <span>Performance Rating</span>
                                    <span class="metric-value" id="performance-rating">Beginner</span>
                                </div>
                            </div>
                            
                            <!-- Admin Panel - ONLY VISIBLE TO ADMIN -->
                            <div id="admin-panel" class="admin-panel">
                                <div class="admin-header">
                                    <h3 style="margin: 0; color: white;"><i class="fas fa-chart-line"></i> Assessment Analytics (Admin Only)</h3>
                                    <div class="admin-actions">
                                        <button class="admin-btn" id="export-btn">
                                            <i class="fas fa-download"></i> Export Data
                                        </button>
                                        <button class="admin-btn" id="copy-btn">
                                            <i class="fas fa-copy"></i> Copy Scores
                                        </button>
                                        <button class="admin-btn" id="clear-btn" style="background: var(--danger);">
                                            <i class="fas fa-trash"></i> Clear All
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="scores-table-container">
                                    <table class="scores-table">
                                        <thead>
                                            <tr>
                                                <th>Rank</th>
                                                <th>Name</th>
                                                <th>Score</th>
                                                <th>Percentage</th>
                                                <th>Date & Time</th>
                                            </tr>
                                        </thead>
                                        <tbody id="scores-table-body">
                                            <!-- Scores will be inserted here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <button id="restart-btn" class="btn-submit" style="width: 100%; max-width: 300px; margin-top: 2rem;">
                                <i class="fas fa-redo"></i> Retake Assessment
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h4>EV Mastery</h4>
                        <p>Professional electric vehicle technology assessment platform for automotive professionals, educators, and enthusiasts.</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Topics Covered</h4>
                        <ul class="footer-links">
                            <li>Power Electronics & Thermal Management</li>
                            <li>Battery Systems & Relays</li>
                            <li>Charging Infrastructure</li>
                            <li>EV Powertrain Components</li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Assessment Features</h4>
                        <ul class="footer-links">
                            <li>60 Comprehensive Questions</li>
                            <li>Detailed Performance Analytics</li>
                            <li>Industry-Standard Evaluation</li>
                            <li>Professional Certification Ready</li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    &copy; 2024 EV Mastery Assessment Platform. All rights reserved. | Designed for Automotive Education
                </div>
            </div>
        </footer>
        
        <!-- Admin Button (Hidden by default) -->
        <div id="direct-admin-btn" class="hidden">
            <i class="fas fa-chart-bar"></i> View All Scores
        </div>
        
        <!-- Secret invisible area for admin access -->
        <div class="secret-admin-area" id="secret-admin-area" style="position: fixed; top: 0; left: 0; width: 100%; height: 50px; opacity: 0.01; z-index: 1000;"></div>
    </div>

    <script>
        // Professional EV Quiz Application - ALL 60 QUESTIONS
        class EVQuiz {
            constructor() {
                this.quizData = this.getQuizData();
                this.currentQuestion = 0;
                this.userAnswers = new Array(60).fill(null);
                this.playerName = "";
                this.scores = this.loadScores();
                this.adminUnlocked = false;
                this.tapCount = 0;
                this.lastTap = 0;
                
                this.init();
            }
            
            getQuizData() {
                // COMPLETE 60 QUESTIONS
                return [
                    // Section 1: Power Electronics & Thermal Management (EV) - Q1 to Q8
                    {
                        id: 1,
                        question: "What is the primary role of the Power Electronics (PC) system in an electric vehicle?",
                        options: [
                            "To manage battery thermal management",
                            "To convert DC power into AC to drive the motor",
                            "To distribute high-voltage power to auxiliary systems",
                            "To control the regenerative braking energy recovery"
                        ],
                        correct: 1,
                        explanation: "The Power Electronics system primarily converts DC battery power into AC to drive the electric motor.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 2,
                        question: "Which component in the cooling system is specifically responsible for storing coolant?",
                        options: [
                            "Radiator",
                            "TCP (Electric Pump)",
                            "Reservoir tank",
                            "Cooling fan"
                        ],
                        correct: 2,
                        explanation: "The reservoir tank (sometimes called expansion tank) stores coolant and allows for expansion and contraction.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 3,
                        question: "In thermal management, what distinguishes 'integrated mode' from 'separated mode'?",
                        options: [
                            "Integrated mode controls HVAC and battery independently; separated mode controls them together",
                            "Integrated mode controls both HVAC and battery together; separated mode controls them independently",
                            "Integrated mode is only for heating; separated mode is only for cooling",
                            "Integrated mode uses air cooling; separated mode uses liquid cooling"
                        ],
                        correct: 1,
                        explanation: "Integrated mode combines HVAC and battery thermal management for better efficiency, while separated mode treats them as separate systems.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 4,
                        question: "What is the primary purpose of the coolant heater in an EV during winter?",
                        options: [
                            "To warm the cabin for passenger comfort",
                            "To maintain the battery at an optimal temperature for performance and charging",
                            "To preheat the motor before starting",
                            "To cool the power electronics during high load"
                        ],
                        correct: 1,
                        explanation: "The coolant heater maintains battery temperature in cold conditions to ensure optimal performance and charging capability.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 5,
                        question: "Which safety feature is automatically activated in case of battery overheating?",
                        options: [
                            "Pre-charge relay engagement",
                            "Cooling mode activation",
                            "Main relay cut-off",
                            "HVAC shutdown"
                        ],
                        correct: 1,
                        explanation: "Cooling mode activation helps dissipate excess heat from the battery to prevent thermal runaway.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 6,
                        question: "What is a key advantage of an integrated thermal management system?",
                        options: [
                            "It requires less complex control algorithms",
                            "It improves overall energy efficiency",
                            "It allows independent operation in case of failure",
                            "It uses separate coolant loops for each system"
                        ],
                        correct: 1,
                        explanation: "Integrated thermal management systems improve overall energy efficiency by optimizing heat transfer between components.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 7,
                        question: "What does 'bootstrap safety' in battery systems primarily refer to?",
                        options: [
                            "Multi-layer safety devices to prevent thermal runaway",
                            "A mechanical locking mechanism for high-voltage connectors",
                            "A software protocol for secure communication",
                            "An emergency braking system"
                        ],
                        correct: 0,
                        explanation: "Bootstrap safety refers to multiple layers of safety devices designed to prevent thermal runaway in battery systems.",
                        section: "Power Electronics & Thermal Management"
                    },
                    {
                        id: 8,
                        question: "How does the thermal management system directly impact battery life?",
                        options: [
                            "By increasing the voltage output during discharge",
                            "By maintaining optimal temperature to prevent degradation",
                            "By reducing the weight of the battery pack",
                            "By allowing faster charging at all times"
                        ],
                        correct: 1,
                        explanation: "Maintaining optimal temperature prevents battery degradation, extending its lifespan and maintaining performance.",
                        section: "Power Electronics & Thermal Management"
                    },
                    // Section 2: Battery Systems & Relays - Q9 to Q16
                    {
                        id: 9,
                        question: "What is the function of the Power Relay Assembly (PRA) in an EV?",
                        options: [
                            "To convert AC to DC for charging",
                            "To control power supply and cut-off between the high-voltage battery and the system",
                            "To manage the alternator output",
                            "To regulate the motor speed"
                        ],
                        correct: 1,
                        explanation: "The PRA controls power flow between the high-voltage battery and the rest of the EV system, including safety cut-off.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 10,
                        question: "In what sequence do the relays operate during EV system startup?",
                        options: [
                            "Main relay â†’ Pre-charge relay â†’ PRA",
                            "Pre-charge relay â†’ Main relay â†’ PRA",
                            "PRA â†’ Main relay â†’ Pre-charge relay",
                            "PRA â†’ Pre-charge relay â†’ Main relay"
                        ],
                        correct: 1,
                        explanation: "The pre-charge relay activates first to gradually charge capacitors, then the main relay closes, followed by PRA engagement.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 11,
                        question: "What is the specific purpose of the pre-charge relay?",
                        options: [
                            "To cut off high-voltage power in an emergency",
                            "To gradually apply voltage to charge capacitors before the main relay closes",
                            "To supply continuous power to the HVAC system",
                            "To regulate alternator field current"
                        ],
                        correct: 1,
                        explanation: "The pre-charge relay gradually applies voltage to charge capacitors, preventing high inrush current when the main relay closes.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 12,
                        question: "Which relay is installed on both the positive and negative terminals of the high-voltage battery?",
                        options: [
                            "Pre-charge relay",
                            "Starting relay",
                            "Main relay",
                            "Inhibitor relay"
                        ],
                        correct: 2,
                        explanation: "Main relays are typically installed on both battery terminals for complete circuit isolation.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 13,
                        question: "What could happen if the main relay fails to operate before system startup?",
                        options: [
                            "The battery may overcharge",
                            "Sparks or arcing could occur during current cut-off",
                            "The motor will run at reduced efficiency",
                            "The cooling system will not activate"
                        ],
                        correct: 1,
                        explanation: "Without proper relay operation, high inrush current can cause arcing or sparking when connections are made.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 14,
                        question: "What does the PRA include for battery protection?",
                        options: [
                            "Fuses and contactors for overcurrent protection",
                            "A built-in cooling circuit",
                            "A voltage step-up converter",
                            "A communication module for BMS"
                        ],
                        correct: 0,
                        explanation: "The PRA includes fuses and contactors to protect against overcurrent conditions.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 15,
                        question: "During discharge of a lead-acid battery, what happens to the sulfuric acid concentration?",
                        options: [
                            "It increases",
                            "It decreases",
                            "It remains constant",
                            "It turns into water"
                        ],
                        correct: 1,
                        explanation: "During discharge, sulfuric acid is consumed, decreasing its concentration in the electrolyte.",
                        section: "Battery Systems & Relays"
                    },
                    {
                        id: 16,
                        question: "What does the Reserve Capacity (RC) rating of a battery indicate?",
                        options: [
                            "The current output at 0Â°F for 30 seconds",
                            "The time the battery can supply essential loads if the charging system fails",
                            "The total energy storage in watt-hours",
                            "The number of charge-discharge cycles"
                        ],
                        correct: 1,
                        explanation: "RC indicates how long (in minutes) a battery can supply essential electrical loads if the charging system fails.",
                        section: "Battery Systems & Relays"
                    },
                    // Section 3: Alternator & Electrical Generation - Q17 to Q24
                    {
                        id: 17,
                        question: "What principle does an alternator operate on?",
                        options: [
                            "Electrochemical reaction",
                            "Electromagnetic induction",
                            "Thermoelectric effect",
                            "Piezoelectric effect"
                        ],
                        correct: 1,
                        explanation: "Alternators generate electricity through electromagnetic induction.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 18,
                        question: "Why are the three stator coils in an alternator placed 120 degrees apart?",
                        options: [
                            "To reduce magnetic interference",
                            "To produce three-phase AC with a 120-degree phase difference",
                            "To increase mechanical stability",
                            "To allow single-phase output"
                        ],
                        correct: 1,
                        explanation: "120-degree spacing creates three-phase AC power with balanced phase differences.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 19,
                        question: "Which component inside the alternator converts AC to DC?",
                        options: [
                            "Regulator",
                            "Stator",
                            "Rotor",
                            "Rectifier (diodes)"
                        ],
                        correct: 3,
                        explanation: "The rectifier, consisting of diodes, converts AC to DC current.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 20,
                        question: "What is the role of the voltage regulator in an alternator?",
                        options: [
                            "To convert AC to DC",
                            "To control field current to maintain stable output voltage",
                            "To cool the alternator windings",
                            "To communicate with the transmission control unit"
                        ],
                        correct: 1,
                        explanation: "The voltage regulator maintains stable output voltage by controlling the field current.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 21,
                        question: "Which alternator terminal is always directly connected to the battery?",
                        options: [
                            "L terminal",
                            "FR terminal",
                            "B+ terminal",
                            "IG terminal"
                        ],
                        correct: 2,
                        explanation: "The B+ terminal is directly connected to the battery positive terminal.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 22,
                        question: "If the voltage regulator fails, what is a likely consequence?",
                        options: [
                            "The battery may overcharge or discharge",
                            "The starter motor will not disengage",
                            "The HVAC system will stop working",
                            "The inhibitor switch will malfunction"
                        ],
                        correct: 0,
                        explanation: "A failed voltage regulator can cause overcharging (damaging battery) or undercharging (discharging battery).",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 23,
                        question: "What does the FR terminal on an alternator communicate to the ECU?",
                        options: [
                            "Battery voltage level",
                            "Alternator load condition for idle speed control",
                            "Field current status",
                            "Rotational speed of the rotor"
                        ],
                        correct: 1,
                        explanation: "The FR terminal communicates alternator load to the ECU for idle speed adjustment.",
                        section: "Alternator & Electrical Generation"
                    },
                    {
                        id: 24,
                        question: "How does a three-phase full-wave rectifier improve efficiency?",
                        options: [
                            "By using only the positive half-cycles of AC",
                            "By using both positive and negative half-cycles of AC",
                            "By stepping up the voltage before rectification",
                            "By incorporating a cooling mechanism"
                        ],
                        correct: 1,
                        explanation: "Full-wave rectification uses both positive and negative half-cycles, improving efficiency and reducing ripple.",
                        section: "Alternator & Electrical Generation"
                    },
                    // Section 4: Starting System & Ignition - Q25 to Q32
                    {
                        id: 25,
                        question: "What is the correct sequence in a traditional key-type starting system?",
                        options: [
                            "Solenoid energizes â†’ Ignition switch turned â†’ Starter motor engages â†’ Battery supplies current",
                            "Battery supplies current â†’ Ignition switch turned â†’ Solenoid closes â†’ Starter motor rotates",
                            "Starter motor rotates â†’ Solenoid engages â†’ Ignition switch turned â†’ Battery supplies current",
                            "Ignition switch turned â†’ Battery supplies current â†’ Solenoid engages â†’ Starter motor rotates"
                        ],
                        correct: 3,
                        explanation: "The correct sequence is: ignition switch turned â†’ battery supplies current â†’ solenoid engages â†’ starter motor rotates.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 26,
                        question: "In a push-button ignition system, what is required to start the engine?",
                        options: [
                            "Press the brake and push the button",
                            "Press the clutch and push the button",
                            "Turn the key to ON and push the button",
                            "Press the accelerator and push the button"
                        ],
                        correct: 0,
                        explanation: "In automatic transmission vehicles, pressing the brake pedal is required for safety.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 27,
                        question: "What is the function of the inhibitor switch in an automatic transmission vehicle?",
                        options: [
                            "To prevent battery overcharging",
                            "To allow starting only in Park (P) or Neutral (N)",
                            "To engage the starter relay when the ignition is on",
                            "To cut off fuel supply in case of a crash"
                        ],
                        correct: 1,
                        explanation: "The inhibitor switch prevents starting in gear for safety reasons.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 28,
                        question: "Which component in the starter motor reverses current direction in the armature windings?",
                        options: [
                            "Brushes",
                            "Commutator",
                            "Field coil",
                            "Solenoid"
                        ],
                        correct: 1,
                        explanation: "The commutator reverses current direction in the armature windings to maintain rotation.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 29,
                        question: "What happens if the brushes in a starter motor are worn too short?",
                        options: [
                            "The armature will overheat",
                            "The field coil will demagnetize",
                            "Current supply becomes unstable, reducing starting performance",
                            "The inhibitor switch will not engage"
                        ],
                        correct: 2,
                        explanation: "Worn brushes cause poor contact, leading to unstable current supply and reduced starting performance.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 30,
                        question: "What is the primary role of the field coil in a starter motor?",
                        options: [
                            "To rotate the armature",
                            "To generate a magnetic field that interacts with the armature",
                            "To supply current to the commutator",
                            "To engage the pinion gear with the flywheel"
                        ],
                        correct: 1,
                        explanation: "The field coil creates a magnetic field that interacts with the armature to produce torque.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 31,
                        question: "What audible indication suggests a relay is operating correctly?",
                        options: [
                            "Buzzing sound",
                            "Humming sound",
                            "Clicking sound",
                            "Whirring sound"
                        ],
                        correct: 2,
                        explanation: "A clear clicking sound indicates the relay coil is energizing and contacts are closing properly.",
                        section: "Starting System & Ignition"
                    },
                    {
                        id: 32,
                        question: "In a starting relay, what do the two smaller terminals control?",
                        options: [
                            "High-current contacts",
                            "The coil",
                            "The inhibitor switch circuit",
                            "The alternator field current"
                        ],
                        correct: 1,
                        explanation: "The two smaller terminals control the relay coil which operates the high-current contacts.",
                        section: "Starting System & Ignition"
                    },
                    // Section 5: EV Powertrain & Charging - Q33 to Q40
                    {
                        id: 33,
                        question: "What is the primary function of the On-Board Charger (OBC)?",
                        options: [
                            "To convert DC to AC for the motor",
                            "To convert AC from the grid to DC for the battery",
                            "To manage power distribution to high-voltage components",
                            "To control the motor speed"
                        ],
                        correct: 1,
                        explanation: "The OBC converts AC from the grid to DC for battery charging.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 34,
                        question: "Which charging method bypasses the OBC?",
                        options: [
                            "Slow AC charging using a household outlet",
                            "Fast DC charging",
                            "AC charging with Type 1 connector",
                            "AC charging with Type 2 connector"
                        ],
                        correct: 1,
                        explanation: "DC fast charging bypasses the OBC and supplies DC directly to the battery.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 35,
                        question: "Which connector type is used for AC charging in North America and South Korea?",
                        options: [
                            "Type 1",
                            "Type 2",
                            "CHAdeMO",
                            "CCS Combo"
                        ],
                        correct: 0,
                        explanation: "Type 1 (J1772) is the standard AC connector in North America and South Korea.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 36,
                        question: "What does Control Pilot (CP) do in Type 1 and Type 2 charging?",
                        options: [
                            "Converts AC to DC",
                            "Checks connection status and enables communication",
                            "Provides high-voltage DC power",
                            "Cools the battery during charging"
                        ],
                        correct: 1,
                        explanation: "Control Pilot handles connection verification, communication, and charging parameter negotiation.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 37,
                        question: "Which fast-charging standard uses CAN communication and was developed in Japan?",
                        options: [
                            "CCS (Combined Charging System)",
                            "Tesla Supercharger",
                            "CHAdeMO",
                            "GB/T"
                        ],
                        correct: 2,
                        explanation: "CHAdeMO is a Japanese DC fast charging standard that uses CAN communication.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 38,
                        question: "What is a key disadvantage of fast charging compared to slow charging?",
                        options: [
                            "It puts more stress on the battery and generates more heat",
                            "It is less convenient for long-distance driving",
                            "It requires a Type 1 connector",
                            "It cannot be used in cold weather"
                        ],
                        correct: 0,
                        explanation: "Fast charging generates more heat and stress on battery cells, potentially reducing long-term battery life.",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 39,
                        question: "What does 'bidirectional charging' enable in the latest OBC technology?",
                        options: [
                            "Charging from both AC and DC sources",
                            "Vehicle-to-grid (V2G) power flow",
                            "Simultaneous charging of multiple EVs",
                            "Faster charging without thermal management"
                        ],
                        correct: 1,
                        explanation: "Bidirectional charging allows power flow from vehicle to grid (V2G) or vehicle to home (V2H).",
                        section: "EV Powertrain & Charging"
                    },
                    {
                        id: 40,
                        question: "Which motor type is mentioned as being mainly used in the latest EV technology?",
                        options: [
                            "Induction motor",
                            "Brushed DC motor",
                            "Permanent magnet synchronous motor (PMSM)",
                            "Switched reluctance motor"
                        ],
                        correct: 2,
                        explanation: "PMSM motors offer high efficiency and power density, making them popular in modern EVs.",
                        section: "EV Powertrain & Charging"
                    },
                    // Section 6: Power Flow & Control Units - Q41 to Q48
                    {
                        id: 41,
                        question: "In the power flow diagram, what does the green dotted line represent?",
                        options: [
                            "Mechanical driving force to the wheels",
                            "Flow of AC power",
                            "Flow of DC power",
                            "Communication data between control units"
                        ],
                        correct: 3,
                        explanation: "Green dotted lines typically represent communication/data flow between control units.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 42,
                        question: "What is the role of the CPU (Electric Power Control Unit) in an EV?",
                        options: [
                            "Only controls the motor output",
                            "Manages power flow between the battery and inverter and optimizes efficiency",
                            "Converts DC to AC for the motor",
                            "Distributes high-voltage power to components"
                        ],
                        correct: 1,
                        explanation: "The CPU manages overall power flow and optimizes energy efficiency in the EV system.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 43,
                        question: "What is a primary function of the High Voltage Junction Block?",
                        options: [
                            "To convert AC to DC",
                            "To contain safety fuses and distribute power",
                            "To cool the battery during fast charging",
                            "To regulate motor speed"
                        ],
                        correct: 1,
                        explanation: "The HVJB contains fuses and distributes high-voltage power to various components.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 44,
                        question: "Which component acts as the 'brain' of the EV system according to the notes?",
                        options: [
                            "OBC",
                            "CPU",
                            "Inverter",
                            "BMS"
                        ],
                        correct: 1,
                        explanation: "The CPU (Electric Power Control Unit) acts as the central control unit or 'brain' of the EV.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 45,
                        question: "What safety measure is taken for high-voltage parts in an EV?",
                        options: [
                            "They are painted blue",
                            "They are marked with orange color",
                            "They are insulated with rubber only",
                            "They are located in the cabin"
                        ],
                        correct: 1,
                        explanation: "High-voltage components are typically marked with orange for safety identification.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 46,
                        question: "Before working on high-voltage components, what must be done first?",
                        options: [
                            "Activate the regenerative braking system",
                            "Disconnect the battery connections",
                            "Run the motor at low speed",
                            "Engage the parking brake only"
                        ],
                        correct: 1,
                        explanation: "Always disconnect high-voltage battery connections and verify zero voltage before working on HV components.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 47,
                        question: "What does the reserve capacity (RC) of a battery indicate?",
                        options: [
                            "Cold cranking performance",
                            "How long the battery can supply power if the charging system fails",
                            "Total energy storage in ampere-hours",
                            "The number of charge cycles"
                        ],
                        correct: 1,
                        explanation: "RC indicates how long (in minutes) a battery can supply essential electrical loads without charging.",
                        section: "Power Flow & Control Units"
                    },
                    {
                        id: 48,
                        question: "What is the purpose of the cooling fan in the thermal management system?",
                        options: [
                            "To circulate coolant",
                            "To store coolant",
                            "To dissipate heat from the radiator",
                            "To cool the battery directly"
                        ],
                        correct: 2,
                        explanation: "The cooling fan forces air through the radiator to dissipate heat from the coolant.",
                        section: "Power Flow & Control Units"
                    },
                    // Section 7: Advanced Topics & Integration - Q49 to Q60
                    {
                        id: 49,
                        question: "What does V2G technology enable?",
                        options: [
                            "Vehicle-to-grid power exchange",
                            "Faster DC charging",
                            "Improved regenerative braking",
                            "Autonomous driving"
                        ],
                        correct: 0,
                        explanation: "V2G (Vehicle-to-Grid) enables EVs to supply power back to the electrical grid.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 50,
                        question: "In an EV, what is the role of the reducer?",
                        options: [
                            "To convert electrical energy to mechanical energy",
                            "To decrease motor speed and increase torque",
                            "To manage power distribution",
                            "To convert DC to AC"
                        ],
                        correct: 1,
                        explanation: "The reducer (or reduction gear) reduces motor RPM while increasing torque to the wheels.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 51,
                        question: "What is a key challenge of integrated thermal management systems?",
                        options: [
                            "They require complex control algorithms",
                            "They are less energy efficient",
                            "They cannot operate independently in case of failure",
                            "They are heavier than separated systems"
                        ],
                        correct: 0,
                        explanation: "Integrated systems require sophisticated control algorithms to manage multiple thermal zones efficiently.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 52,
                        question: "What does the '60L' on a battery label refer to?",
                        options: [
                            "Cold cranking amps",
                            "Reserve capacity in minutes",
                            "Battery size and type standard",
                            "Nominal voltage"
                        ],
                        correct: 2,
                        explanation: "60L refers to battery group size and terminal configuration standard.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 53,
                        question: "What is the main advantage of using a relay in a starting circuit?",
                        options: [
                            "It increases voltage",
                            "It allows a small current to control a large current",
                            "It converts AC to DC",
                            "It regulates battery temperature"
                        ],
                        correct: 1,
                        explanation: "Relays allow low-current circuits to control high-current circuits, protecting switches and wiring.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 54,
                        question: "What is the chemical reaction during discharge in a lead-acid battery?",
                        options: [
                            "Pb + PbOâ‚‚ + 2Hâ‚‚SOâ‚„ â†’ 2PbSOâ‚„ + 2Hâ‚‚O",
                            "2PbSOâ‚„ + 2Hâ‚‚O â†’ Pb + PbOâ‚‚ + 2Hâ‚‚SOâ‚„",
                            "PbOâ‚‚ + Hâ‚‚O â†’ PbSOâ‚„ + Oâ‚‚",
                            "Pb + Hâ‚‚SOâ‚„ â†’ PbSOâ‚„ + Hâ‚‚"
                        ],
                        correct: 0,
                        explanation: "During discharge, lead (Pb), lead dioxide (PbOâ‚‚), and sulfuric acid (Hâ‚‚SOâ‚„) produce lead sulfate (PbSOâ‚„) and water.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 55,
                        question: "Which terminal on the alternator is connected to the charge warning lamp?",
                        options: [
                            "B+ terminal",
                            "L terminal",
                            "FR terminal",
                            "S terminal"
                        ],
                        correct: 1,
                        explanation: "The L terminal connects to the charge warning lamp on the dashboard.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 56,
                        question: "What is the purpose of the S terminal on an alternator?",
                        options: [
                            "To activate the voltage regulator",
                            "To detect battery voltage for regulation",
                            "To inform the ECU of alternator load",
                            "To supply field current"
                        ],
                        correct: 1,
                        explanation: "The S terminal senses battery voltage for accurate voltage regulation.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 57,
                        question: "In the context of EV charging, what does PLC stand for?",
                        options: [
                            "Power Line Communication",
                            "Phase Load Control",
                            "Primary Load Converter",
                            "Pilot Link Check"
                        ],
                        correct: 0,
                        explanation: "PLC enables communication over power lines between EV and charging station.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 58,
                        question: "What is a characteristic of Type 2 connectors?",
                        options: [
                            "They use single-phase AC 240V",
                            "They are mainly used in North America",
                            "They use three-phase AC 230V",
                            "They are only for DC fast charging"
                        ],
                        correct: 2,
                        explanation: "Type 2 (Mennekes) connectors support three-phase AC charging up to 43kW.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 59,
                        question: "What does the BMS (Battery Management System) primarily do?",
                        options: [
                            "Converts DC to AC",
                            "Manages battery thermal and electrical conditions",
                            "Controls the motor output",
                            "Distributes high-voltage power"
                        ],
                        correct: 1,
                        explanation: "BMS monitors and manages battery temperature, voltage, current, and state of charge for safety and longevity.",
                        section: "Advanced Topics & Integration"
                    },
                    {
                        id: 60,
                        question: "What is a key safety feature of the High Voltage Junction Block?",
                        options: [
                            "It converts AC to DC",
                            "It contains safety fuses to prevent overcurrent",
                            "It cools the battery during fast charging",
                            "It regulates motor speed"
                        ],
                        correct: 1,
                        explanation: "The HVJB contains fuses that protect against overcurrent conditions in high-voltage circuits.",
                        section: "Advanced Topics & Integration"
                    }
                ];
            }
            
            init() {
                this.bindEvents();
                this.updateStats();
                this.createAdminAccessButton();
                
                // Secret admin unlock
                document.getElementById('secret-admin-area').addEventListener('click', () => this.handleSecretTap());
                
                // Check for admin in URL
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.get('admin') === 'true' || urlParams.get('admin') === 'manoj1680') {
                    this.unlockAdmin();
                }
            }
            
            createAdminAccessButton() {
                // Create admin button (hidden by default)
                const adminBtn = document.getElementById('direct-admin-btn');
                
                adminBtn.onmouseover = () => {
                    adminBtn.style.transform = 'translateY(-2px)';
                    adminBtn.style.boxShadow = '0 6px 20px rgba(139, 92, 246, 0.6)';
                };
                
                adminBtn.onmouseout = () => {
                    adminBtn.style.transform = 'translateY(0)';
                    adminBtn.style.boxShadow = '0 4px 15px rgba(139, 92, 246, 0.4)';
                };
                
                adminBtn.onclick = () => {
                    // Unlock admin mode
                    this.unlockAdmin();
                    
                    // Skip to results page
                    document.getElementById('name-entry').classList.add('hidden');
                    document.getElementById('quiz-content').classList.add('hidden');
                    document.getElementById('results-container').classList.remove('hidden');
                    document.getElementById('admin-panel').style.display = 'block';
                    
                    // Update admin panel
                    this.updateAdminPanel();
                    
                    this.showToast('Admin panel opened directly');
                };
            }
            
            bindEvents() {
                // Start quiz button
                document.getElementById('start-quiz-btn').addEventListener('click', () => this.startQuiz());
                
                // Enter key for name input
                document.getElementById('player-name').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.startQuiz();
                });
                
                // Navigation buttons
                document.getElementById('prev-btn').addEventListener('click', () => this.prevQuestion());
                document.getElementById('next-btn').addEventListener('click', () => this.nextQuestion());
                
                // Restart button
                document.getElementById('restart-btn').addEventListener('click', () => this.restartQuiz());
                
                // Admin buttons
                document.getElementById('export-btn').addEventListener('click', () => this.exportScores());
                document.getElementById('copy-btn').addEventListener('click', () => this.copyScores());
                document.getElementById('clear-btn').addEventListener('click', () => this.clearScores());
            }
            
            startQuiz() {
                this.playerName = document.getElementById('player-name').value.trim();
                
                if (!this.playerName) {
                    this.showToast('Please enter your name to begin the assessment');
                    document.getElementById('player-name').focus();
                    return;
                }
                
                // Auto-unlock admin if your name
                if (this.playerName.toLowerCase() === 'manoj' || this.playerName === 'manoj1680') {
                    this.adminUnlocked = true;
                    // Show admin button
                    document.getElementById('direct-admin-btn').classList.remove('hidden');
                }
                
                // Hide name entry, show quiz
                document.getElementById('name-entry').classList.add('hidden');
                document.getElementById('quiz-content').classList.remove('hidden');
                
                this.loadQuestion();
            }
            
            loadQuestion() {
                const question = this.quizData[this.currentQuestion];
                
                // Update UI
                document.getElementById('question-number').textContent = question.id;
                document.getElementById('question-text').textContent = question.question;
                document.getElementById('current-section').textContent = question.section;
                document.getElementById('current-question').textContent = `Question ${question.id} of 60`;
                
                // Update progress
                const answered = this.userAnswers.filter(a => a !== null).length;
                const progress = (answered / 60) * 100;
                document.getElementById('progress-fill').style.width = `${progress}%`;
                document.getElementById('progress-percent').textContent = `${Math.round(progress)}%`;
                
                // Load options
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';
                
                const letters = ['A', 'B', 'C', 'D'];
                question.options.forEach((option, index) => {
                    const optionCard = document.createElement('div');
                    optionCard.className = 'option-card';
                    
                    if (this.userAnswers[this.currentQuestion] === index) {
                        optionCard.classList.add('selected');
                    }
                    
                    optionCard.innerHTML = `
                        <div class="option-letter">${letters[index]}</div>
                        <div class="option-text">${option}</div>
                    `;
                    
                    optionCard.addEventListener('click', () => this.selectOption(index));
                    optionsContainer.appendChild(optionCard);
                });
                
                // Update navigation buttons
                document.getElementById('prev-btn').disabled = this.currentQuestion === 0;
                
                if (this.currentQuestion === this.quizData.length - 1) {
                    document.getElementById('next-btn').innerHTML = '<i class="fas fa-paper-plane"></i> Submit Assessment';
                    document.getElementById('next-btn').className = 'nav-btn btn-submit';
                } else {
                    document.getElementById('next-btn').innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
                    document.getElementById('next-btn').className = 'nav-btn btn-next';
                }
            }
            
            selectOption(index) {
                // Remove selected from all options
                document.querySelectorAll('.option-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // Add selected to clicked option
                document.querySelectorAll('.option-card')[index].classList.add('selected');
                
                // Save answer
                this.userAnswers[this.currentQuestion] = index;
                
                // Update progress
                const answered = this.userAnswers.filter(a => a !== null).length;
                const progress = (answered / 60) * 100;
                document.getElementById('progress-fill').style.width = `${progress}%`;
                document.getElementById('progress-percent').textContent = `${Math.round(progress)}%`;
            }
            
            prevQuestion() {
                if (this.currentQuestion > 0) {
                    this.currentQuestion--;
                    this.loadQuestion();
                }
            }
            
            nextQuestion() {
                if (this.currentQuestion === this.quizData.length - 1) {
                    this.submitQuiz();
                } else {
                    this.currentQuestion++;
                    this.loadQuestion();
                }
            }
            
            submitQuiz() {
                // Calculate score
                let score = 0;
                this.quizData.forEach((q, i) => {
                    if (this.userAnswers[i] === q.correct) score++;
                });
                
                // Save score
                this.saveScore(this.playerName, score);
                
                // Show results
                document.getElementById('quiz-content').classList.add('hidden');
                document.getElementById('results-container').classList.remove('hidden');
                
                // Update results display
                const percentage = Math.round((score / 60) * 100);
                document.getElementById('score-display').textContent = `${score}/60`;
                document.getElementById('overall-score').textContent = `${percentage}%`;
                document.getElementById('correct-answers').textContent = score;
                document.getElementById('incorrect-answers').textContent = 60 - score;
                
                // Performance rating
                let rating = '';
                if (percentage >= 90) rating = 'Expert';
                else if (percentage >= 80) rating = 'Advanced';
                else if (percentage >= 70) rating = 'Proficient';
                else if (percentage >= 60) rating = 'Competent';
                else rating = 'Beginner';
                
                document.getElementById('performance-rating').textContent = rating;
                
                // Show admin panel ONLY if admin is unlocked
                if (this.adminUnlocked) {
                    document.getElementById('admin-panel').style.display = 'block';
                    this.updateAdminPanel();
                } else {
                    // Regular users don't see admin panel
                    document.getElementById('admin-panel').style.display = 'none';
                }
                
                // Update stats
                this.updateStats();
                
                // Show toast
                this.showToast('Assessment submitted successfully!');
            }
            
            saveScore(name, score) {
                const newScore = {
                    id: Date.now(),
                    name: name,
                    score: score,
                    percentage: Math.round((score / 60) * 100),
                    date: new Date().toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }),
                    timestamp: Date.now()
                };
                
                this.scores.push(newScore);
                localStorage.setItem('ev_quiz_scores', JSON.stringify(this.scores));
                
                // Update admin panel if visible
                if (this.adminUnlocked) {
                    this.updateAdminPanel();
                }
            }
            
            loadScores() {
                const saved = localStorage.getItem('ev_quiz_scores');
                return saved ? JSON.parse(saved) : [];
            }
            
            updateStats() {
                // Update total attempts
                document.getElementById('total-attempts').textContent = this.scores.length;
            }
            
            updateAdminPanel() {
                const tableBody = document.getElementById('scores-table-body');
                
                // Sort by score descending
                const sortedScores = [...this.scores].sort((a, b) => b.score - a.score);
                
                let html = '';
                sortedScores.forEach((score, index) => {
                    let rankClass = '';
                    if (index === 0) rankClass = 'rank-1';
                    else if (index === 1) rankClass = 'rank-2';
                    else if (index === 2) rankClass = 'rank-3';
                    
                    html += `
                        <tr>
                            <td>
                                <div class="rank-badge ${rankClass}">${index + 1}</div>
                            </td>
                            <td><strong>${score.name}</strong></td>
                            <td>${score.score}/60</td>
                            <td>${score.percentage}%</td>
                            <td>${score.date}</td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = html;
            }
            
            unlockAdmin() {
                this.adminUnlocked = true;
                document.getElementById('admin-panel').style.display = 'block';
                this.updateAdminPanel();
                
                // Show admin button
                document.getElementById('direct-admin-btn').classList.remove('hidden');
                
                this.showToast('Administrator mode activated');
            }
            
            handleSecretTap() {
                const now = Date.now();
                if (now - this.lastTap > 1000) {
                    this.tapCount = 0;
                }
                
                this.tapCount++;
                this.lastTap = now;
                
                if (this.tapCount >= 5) {
                    this.unlockAdmin();
                    this.tapCount = 0;
                }
            }
            
            exportScores() {
                const dataStr = JSON.stringify(this.scores, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', `ev-assessment-scores-${new Date().toISOString().split('T')[0]}.json`);
                linkElement.click();
                
                this.showToast('Data exported successfully');
            }
            
            copyScores() {
                const text = this.scores.map(s => 
                    `${s.name}: ${s.score}/60 (${s.percentage}%) - ${s.date}`
                ).join('\n');
                
                navigator.clipboard.writeText(text).then(() => {
                    this.showToast('Copied to clipboard');
                });
            }
            
            clearScores() {
                if (confirm('Are you sure you want to delete ALL scores? This cannot be undone.')) {
                    localStorage.removeItem('ev_quiz_scores');
                    this.scores = [];
                    this.updateAdminPanel();
                    this.updateStats();
                    this.showToast('All scores cleared!');
                }
            }
            
            restartQuiz() {
                this.currentQuestion = 0;
                this.userAnswers = new Array(60).fill(null);
                
                document.getElementById('results-container').classList.add('hidden');
                document.getElementById('name-entry').classList.remove('hidden');
                document.getElementById('player-name').value = '';
                document.getElementById('player-name').focus();
                
                // Hide admin panel
                document.getElementById('admin-panel').style.display = 'none';
                this.adminUnlocked = false;
            }
            
            showToast(message) {
                // Create toast element
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    bottom: 70px;
                    right: 20px;
                    background: var(--gradient);
                    color: white;
                    padding: 12px 24px;
                    border-radius: var(--radius-sm);
                    font-weight: 600;
                    z-index: 1000;
                    opacity: 0;
                    transition: opacity 0.3s;
                    box-shadow: var(--shadow-lg);
                `;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                // Show toast
                setTimeout(() => toast.style.opacity = '1', 10);
                
                // Hide toast after 3 seconds
                setTimeout(() => {
                    toast.style.opacity = '0';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        }
        
        // Initialize quiz when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.evQuiz = new EVQuiz();
        });
    </script>
</body>
</html>
